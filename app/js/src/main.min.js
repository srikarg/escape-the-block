(function(){var t,e,n,r,a,i,o,s,c,u,l,y,f;f=800,r=200,s="#3498db",t="#e74c3c",c=3.5,n=10,e=1,l=0,a="",i=["Give up.","You'll never win.","Stop trying.","You can never beat your high score!","Try reaching 30 seconds noob.","Wow, you're pretty bad at this game.","You jump like my grandmother.","I'll give you candy if you give up.","Go back to Jump 101."],y=null,o=null,u=function(t){return 1===t?t+" second":t+" seconds"},Crafty.init(f,r),Crafty.scene("Loading",function(){return Crafty.load(["music/background.wav","music/jump.wav","music/die.wav","music/end.wav"],function(){return Crafty.bind("KeyDown",function(t){return 77===t.key?Crafty.audio.toggleMute():void 0}),Crafty.audio.add("background","music/background.wav"),Crafty.audio.add("jump","music/jump.wav"),Crafty.audio.add("die","music/die.wav"),Crafty.audio.add("end","music/end.wav"),Crafty.audio.play("background",-1,1),Crafty.scene("MainMenu")}),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().text("Loading...").attr({w:600,h:300,x:f/2-300,y:r/2-15})}),Crafty.scene("MainMenu",function(){return Crafty.e("2D, DOM, HTML").css({color:"white","pointer-events":"none",padding:"16px","text-align":"center"}).attr({w:f,h:r,x:0,y:0}).replace("<style>\n    h1 {\n        text-align: center;\n    }\n</style>\n<h1>Escape the Block!</h1>\n<p>Press p to start playing or i for instructions!</p>").requires("Keyboard").bind("KeyDown",function(){return this.isDown(73)?Crafty.scene("Instructions"):this.isDown(80)?Crafty.scene("Game"):void 0})}),Crafty.scene("Instructions",function(){return Crafty.e("2D, DOM, HTML").css({color:"white","pointer-events":"none",padding:"16px"}).attr({w:f,h:r,x:0,y:0}).requires("Keyboard").bind("KeyDown",function(){return this.isDown(80)?Crafty.scene("Game"):void 0}).replace("<style>\n    h1 {\n        font-size: 24px;\n    }\n    ul {\n        list-style: none;\n        margin-left: 20px;\n        padding-left: 1em;\n        text-indent: -1em;\n        font-size: 14px;\n    }\n    li {\n        margin: 5px 0;\n    }\n</style>\n<h1>Instructions</h1>\n<ul>\n    <li>&#8594; Don't let the red guy touch you!</li>\n    <li>&#8594; Jump with the &#8593; arrow.</li>\n    <li>&#8594; Try to last as long as possible!</li>\n    <li>&#8594; Press m to mute!</li>\n</ul>\n<p>Press p to start playing!</p>")}),Crafty.scene("Game",function(){var d,h,C,p,x,w,g,v;return Crafty.background("black"),y=setInterval(function(){return l++},1e3),o=setInterval(function(){var t;return t=Math.floor(Math.random()*(i.length-0+1)),a=i[t]},4e3),Crafty.c("Floor",{init:function(){return this.requires("2D, Canvas, Collision, Gravity, Color"),this.color("white")}}),Crafty.c("Object",{init:function(){return this.requires("2D, Canvas, Gravity, Color"),this.gravity("Floor")}}),Crafty.c("Player",{init:function(){return this.requires("Object, Collision, Multiway"),this.multiway(c,{UP_ARROW:-90}),this.color(s),this.bind("Move",function(t){return t._y===r-40&&this.y<r-40?Crafty.audio.play("jump",1,1):void 0})}}),Crafty.c("Enemy",{speed:n,init:function(){return this.requires("Object, Collision"),this.color(t),this.bind("EnterFrame",function(){return this.x-=this.speed,this.x<0?(this.x=f-60,this.speed+=e):void 0}),this.onHit("Player",function(){return Crafty.audio.play("die",1,1),Crafty.scene("EndGame")})}}),g=Crafty.e("Player").attr({w:20,h:20,x:60,y:r-40}),p=Crafty.e("Enemy").attr({w:20,h:20,x:f+20,y:r-40}),x=Crafty.e("Floor").attr({w:f,h:20,x:0,y:r-20}),w=Crafty.e("2D, Canvas, Color").color("white").attr({w:20,h:r,x:0,y:0}),v=Crafty.e("2D, Canvas, Color").color("white").attr({w:20,h:r,x:f-20,y:0}),d=Crafty.e("2D, Canvas, Color").color("white").attr({w:f,h:20,x:0,y:0}),h=Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().bind("EnterFrame",function(){return this.text(a)}).attr({w:600,h:300,x:f/2-300,y:r/2-15}),C=Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().bind("EnterFrame",function(){return this.text(u(l))}).attr({w:600,h:300,x:f/2-300,y:r/2-50})}),Crafty.scene("EndGame",function(){return Crafty.audio.stop("background"),Crafty.audio.play("end",-1,1),null===Crafty.storage("score")?Crafty.storage("score",""+l):l>Crafty.storage("score")&&(Crafty.storage.remove("score"),Crafty.storage("score",""+l)),Crafty.background("#e74c3c"),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"20px"}).unselectable().text("You survived "+u(l)+"!").attr({w:500,h:300,x:f/2-250,y:r/2-50}),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"20px"}).unselectable().text("Your high score is "+u(parseInt(Crafty.storage("score")))+"!").attr({w:600,h:300,x:f/2-300,y:r/2}),Crafty.e("2D, DOM, Text").css({"text-align":"center",color:"white","pointer-events":"none"}).textFont({family:"Press Start 2P",size:"16px"}).unselectable().text("Press space to play again!").requires("Keyboard").bind("KeyDown",function(){return this.isDown("SPACE")?(l=0,clearInterval(y),clearInterval(o),a="",Crafty.audio.stop("end"),Crafty.audio.play("background",-1,1),Crafty.scene("Game")):void 0}).attr({w:500,h:300,x:f/2-250,y:r/2+50})}),Crafty.scene("Loading")}).call(this);